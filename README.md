# Academic Reports System

> Веб-приложение для автоматического анализа отчетов учебной части колледжа на базе Excel файлов.

---

## Содержание

- [О проекте](#о-проекте)
- [Возможности](#возможности)
- [Технологии](#технологии)
- [Типы отчетов](#типы-отчетов)
- [Установка](#установка)
- [Запуск](#запуск)
- [Структура проекта](#структура-проекта)
- [API Endpoints](#api-endpoints)

---

## О проекте

**Academic Reports System** — современное веб-приложение для обработки и анализа отчетов учебной части колледжа. Система автоматически извлекает данные из Excel файлов, анализирует их по заданным критериям и формирует наглядные отчеты с возможностью поиска и фильтрации.

---

## Возможности

### Аутентификация и авторизация
- JWT токены для безопасной аутентификации
- Система ролей: `admin`, `moderator`, `user`
- Защищенные эндпоинты API

### Обработка отчетов
- **6 типов анализа:** расписание, темы, студенты, посещаемость, домашние задания
- **Автоматическое определение структуры** Excel файлов
- **Валидация данных** с подробными сообщениями об ошибках

### Поиск и фильтрация (NEW!)
- **Мгновенный поиск** по всем колонкам без обращения к серверу
- **Счетчик результатов** — "Найдено X из Y"
- **Кнопка сброса фильтров** одним кликом
- **Анимированное отображение** результатов

### Интерфейс
- **Drag & Drop** загрузка файлов
- **Темная/светлая тема** с автоматическим переключением
- **Адаптивный дизайн** для всех устройств
- **Плавные анимации** и современный UI

### Дополнительно
- **История отчетов** с возможностью повторной загрузки
- **Управление пользователями** для администраторов
- **Docker поддержка** для быстрого развертывания

---

## Технологии

### Backend
- **Python 3.11+** — основной язык разработки
- **FastAPI** — современный веб-фреймворк
- **Pandas** — обработка Excel файлов
- **SQLite** — база данных
- **JWT** — аутентификация
- **Passlib** — хеширование паролей

### Frontend
- **HTML5 / CSS3** — семантическая разметка
- **Vanilla JS** — Логика приложения, без внешних фреймворков

### Дополнительно
- **Docker** — контейнеризация
- **Uvicorn** — ASGI сервер
- **Python-multipart** — обработка файлов

---

## Типы отчетов

### 1. Расписание групп
Анализирует расписание занятий и подсчитывает количество пар по каждой дисциплине.

**Критерии:**
- Подсчет количества занятий по дисциплинам
- Группировка по преподавателям

### 2. Темы занятий
Проверяет правильность оформления тем в журналах.

**Критерии:**
- Формат: "Урок № X. Тема: название"
- Выявление неверно оформленных записей

### 3. Отчет по студентам
Находит студентов с проблемами в успеваемости.

**Критерии:**
- Средняя оценка за ДЗ = 1
- Оценка за классную работу < 3

### 4. Посещаемость
Выявляет преподавателей с низкой посещаемостью.

**Критерии:**
- Посещаемость < 40%

### 5. Проверка домашних заданий
Находит преподавателей с низким процентом проверки ДЗ.

**Критерии:**
- Процент проверки < 70%

### 6. Сданные домашние задания
Выявляет студентов с низким процентом выполнения ДЗ.

**Критерии:**
- Процент выполнения < 70%

---

## Установка

### Требования
- Python 3.8 или выше
- pip (менеджер пакетов Python)
- Git

### Шаг 1: Клонирование репозитория
```bash
git clone https://github.com/yourusername/academic-reports.git
cd academic-reports
```

### Шаг 2: Создание виртуального окружения
```bash
# Windows
python -m venv venv
venv\Scripts\activate

# Linux/Mac
python3 -m venv venv
source venv/bin/activate
```

### Шаг 3: Установка зависимостей
```bash
cd backend
pip install -r requirements.txt
```

### Шаг 4: Инициализация базы данных
```bash
python -c "from database import init_db; init_db()"
```

---

## Запуск

### Вариант 1: Локальный запуск

#### Backend
```bash
cd backend
uvicorn server:app --reload --host 0.0.0.0 --port 8000
```

#### Frontend
```bash
cd frontend
python -m http.server 8080
```

Открой браузер: `http://localhost:8080`

### Вариант 2: Docker (рекомендуется)

```bash
docker-compose up --build
```

Приложение будет доступно на `http://localhost:8080`

---

## Структура проекта

```
academic-reports/
│
├── backend/
│   ├── server.py           # Основной FastAPI сервер
│   ├── database.py         # Модели и работа с БД
│   ├── requirements.txt    # Python зависимости
│   └── academic_reports.db # SQLite база данных
│
├── frontend/
│   ├── index.html          # Главная страница
│   └── uploads/            # Загруженные Excel файлы
│
├── docker-compose.yml      # Docker конфигурация
├── Dockerfile             # Docker образ
└── README.md              # Документация
```

---

## API Endpoints

### Аутентификация

#### `POST /auth/login`
Вход в систему
```json
{
  "username": "admin",
  "password": "admin123"
}
```

**Ответ:**
```json
{
  "access_token": "eyJ0eXAiOiJKV1QiLCJhbGc...",
  "token_type": "bearer",
  "user": {...}
}
```

#### `POST /auth/register`
Регистрация нового пользователя
```json
{
  "username": "newuser",
  "password": "password123",
  "full_name": "Иван Иванов"
}
```

---

### Отчеты

#### `POST /reports/process`
Обработка Excel файла

**Parameters:**
- `file` (multipart/form-data) — Excel файл
- `report_type` (string) — тип отчета
- `period` (string, optional) — период для отчетов по ДЗ

**Ответ:**
```json
{
  "status": "success",
  "report_type": "students",
  "report_label": "Отчет по студентам",
  "stats": {
    "total_count": 150,
    "problem_count": 13
  },
  "data": {
    "students": [...]
  }
}
```

#### `GET /reports/history`
Получить историю отчетов

**Ответ:**
```json
{
  "history": [
    {
      "id": 1,
      "filename": "report.xlsx",
      "report_type": "students",
      "report_label": "Отчет по студентам",
      "timestamp": "2024-01-26T10:30:00",
      "username": "admin",
      "stats": {...},
      "data": {...}
    }
  ]
}
```

---

### Пользователи

#### `GET /users/me`
Получить информацию о текущем пользователе

#### `GET /users`
Получить список всех пользователей (только для admin/moderator)

#### `DELETE /users/{user_id}`
Удалить пользователя (только для admin)